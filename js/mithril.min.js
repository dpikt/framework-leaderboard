!function(a,b){"use strict";var c=b(a);"object"==typeof module&&null!=module&&module.exports?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):a.m=c}("undefined"!=typeof window?window:this,function(a,b){"use strict";function e(a){return"function"==typeof a}function f(a){return"[object Object]"===d.call(a)}function g(a){return"[object String]"===d.call(a)}function i(){}function o(a){k=a.document,l=a.location,n=a.cancelAnimationFrame||a.clearTimeout,m=a.requestAnimationFrame||a.setTimeout}function p(a,b){for(var e,c=[],d=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g;e=d.exec(b);)if(""===e[1]&&e[2])a.tag=e[2];else if("#"===e[1])a.attrs.id=e[2];else if("."===e[1])c.push(e[2]);else if("["===e[3][0]){var f=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/.exec(e[3]);a.attrs[f[1]]=f[3]||""}return c}function q(a,b){var c=b?a.slice(1):a;return 1===c.length&&h(c[0])?c[0]:c}function r(a,b,d){var e="class"in b?"class":"className";for(var f in b)c.call(b,f)&&(f===e&&null!=b[f]&&""!==b[f]?(d.push(b[f]),a[f]=""):a[f]=b[f]);d.length&&(a[e]=d.join(" "))}function s(a,b){for(var c=[],d=1,e=arguments.length;d<e;d++)c[d-1]=arguments[d];if(f(a))return Fa(a,c);if(!g(a))throw new Error("selector in m(selector, attrs, children) should be a string");var h=null!=b&&f(b)&&!("tag"in b||"view"in b||"subtree"in b),i=h?b:{},j={tag:"div",attrs:{},children:q(c,h)};return r(j.attrs,i,p(j,a)),j}function t(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function u(a,b){t(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function v(a){try{if(null!=a&&null!=a.toString())return a}catch(a){}return""}function w(a,b,c,d){try{y(a,b,c),b.nodeValue=d}catch(a){}}function x(a){for(var b=0;b<a.length;b++)h(a[b])&&(a=a.concat.apply([],a),b--);return a}function y(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function C(a,b,d,e){u(a,function(a,c){b[a=a.key]=b[a]?{action:B,index:c,from:b[a].index,element:d.nodes[b[a].index]||k.createElement("div")}:{action:A,index:c}});var f=[];for(var g in b)c.call(b,g)&&f.push(b[g]);var h=f.sort(da),i=new Array(d.length);return i.nodes=d.nodes.slice(),t(h,function(b){var c=b.index;if(b.action===z&&(ja(d[c].nodes,d[c]),i.splice(c,1)),b.action===A){var f=k.createElement("div");f.key=a[c].attrs.key,y(e,f,c),i.splice(c,0,{attrs:{key:a[c].attrs.key},nodes:[f]}),i.nodes[c]=f}if(b.action===B){var g=b.element,h=e.childNodes[c];h!==g&&null!==g&&e.insertBefore(g,h||null),i[c]=d[b.from],i.nodes[c]=g}}),i}function D(a,b,c,d){var e=a.length!==b.length;return e||u(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?C(a,c,b,d):b}function E(a,b,c){t(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)}),t(b.nodes,function(a,d){null!=a.parentNode&&c.indexOf(a)<0&&ja([a],[b[d]])}),a.length<b.length&&(b.length=a.length),b.nodes=c}function F(a){var b=0;u(a,function(){return t(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function G(a,b,c){return a.tag!==b.tag||(c.sort().join()!==Object.keys(b.attrs).sort().join()||(a.attrs.id!==b.attrs.id||(a.attrs.key!==b.attrs.key||("all"===s.redraw.strategy()?!b.configContext||b.configContext.retain!==!0:"diff"===s.redraw.strategy()&&(b.configContext&&b.configContext.retain===!1)))))}function H(a,b,c){G(a,b,c)&&(b.nodes.length&&ja(b.nodes),b.configContext&&e(b.configContext.onunload)&&b.configContext.onunload(),b.controllers&&t(b.controllers,function(a){a.onunload&&a.onunload({preventDefault:i})}))}function I(a,b){return a.attrs.xmlns?a.attrs.xmlns:"svg"===a.tag?"http://www.w3.org/2000/svg":"math"===a.tag?"http://www.w3.org/1998/Math/MathML":b}function K(a,b,c){c.length&&(a.views=b,a.controllers=c,t(c,function(a){if(a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old),J&&a.onunload){var b=a.onunload;a.onunload=i,a.onunload.$old=b}}))}function L(a,b,c,d,f){if(e(b.attrs.config)){var g=f.configContext=f.configContext||{};a.push(function(){return b.attrs.config.call(b,c,!d,g,f)})}}function M(a,c,d,e,f,g,h,i){var j=a.nodes[0];return e&&ia(j,c.tag,c.attrs,a.attrs,f),a.children=ca(j,c.tag,b,b,c.children,a.children,!1,0,c.attrs.contenteditable?j:d,f,h),a.nodes.intact=!0,i.length&&(a.views=g,a.controllers=i),j}function N(a,b,c){var d;a.$trusted?d=oa(b,c,a):(d=[k.createTextNode(a)],b.nodeName in j||y(b,d[0],c));var e;return e="string"==typeof a||"number"==typeof a||"boolean"==typeof a?new a.constructor(a):a,e.nodes=d,e}function O(a,b,c,d,e,f){var g=b.nodes;return d&&d===k.activeElement||(a.$trusted?(ja(g,b),g=oa(c,e,a)):"textarea"===f?c.value=a:d?d.innerHTML=a:((1===g[0].nodeType||g.length>1||g[0].nodeValue.trim&&!g[0].nodeValue.trim())&&(ja(b.nodes,b),g=[k.createTextNode(a)]),w(c,g[0],e,a))),b=new a.constructor(a),b.nodes=g,b}function P(a,b,c,d,e,f,g){return a.nodes.length?a.valueOf()!==b.valueOf()||e?O(b,a,d,f,c,g):(a.nodes.intact=!0,a):N(b,d,c)}function Q(a){if(a.$trusted){var b=a.match(/<[^\/]|\>\s*[^<]/g);if(null!=b)return b.length}else if(h(a))return a.length;return 1}function R(a,c,d,e,f,g,h,i,j){a=x(a);var k=[],l=c.length===a.length,m=0,n={},o=!1;u(c,function(a,b){o=!0,n[c[b].attrs.key]={action:z,index:b}}),F(a),o&&(c=D(a,c,n,d));for(var p=0,q=0,r=a.length;q<r;q++){var s=ca(d,f,c,e,a[q],c[p],g,e+m||m,h,i,j);s!==b&&(l=l&&s.nodes.intact,m+=Q(s),c[p++]=s)}return l||E(a,c,k),c}function S(a,b,c,e,f){if(null!=b){if(d.call(b)===d.call(a))return b;if(f&&f.nodes){var g=c-e,i=g+(h(a)?a:b.nodes).length;ja(f.nodes.slice(g,i),f.slice(g,i))}else b.nodes&&ja(b.nodes,b)}return b=new a.constructor,b.tag&&(b={}),b.nodes=[],b}function T(a,b){return a.attrs.is?null==b?k.createElement(a.tag,a.attrs.is):k.createElementNS(b,a.tag,a.attrs.is):null==b?k.createElement(a.tag):k.createElementNS(b,a.tag)}function U(a,b,c,d){return d?ia(b,a.tag,a.attrs,{},c):a.attrs}function V(a,c,d,e,f,g){return null!=a.children&&a.children.length>0?ca(c,a.tag,b,b,a.children,d.children,!0,0,a.attrs.contenteditable?c:e,f,g):a.children}function W(a,b,c,d,e,f,g){var h={tag:a.tag,attrs:b,children:c,nodes:[d]};return K(h,f,g),h.children&&!h.children.nodes&&(h.children.nodes=[]),"select"===a.tag&&"value"in a.attrs&&ia(d,a.tag,{value:a.attrs.value},{},e),h}function X(a,b,c,d){var f;return f="diff"===s.redraw.strategy()&&a?a.indexOf(b):-1,f>-1?c[f]:e(d)?new d:{}}function Z(a,b,c,d){null!=d.onunload&&Y.map(function(a){return a.handler}).indexOf(d.onunload)<0&&Y.push({controller:d,handler:d.onunload}),a.push(c),b.push(d)}function _(a,b,c,d,e,f){var g=X(c.views,b,d,a.controller),h=a&&a.attrs&&a.attrs.key;return a=0===J||$||d&&d.indexOf(g)>-1?a.view(g):{tag:"placeholder"},"retain"===a.subtree?a:(a.attrs=a.attrs||{},a.attrs.key=h,Z(f,e,b,g),a)}function aa(a,b,c,d){for(var e=b&&b.controllers;null!=a.view;)a=_(a,a.view.$original||a.view,b,e,d,c);return a}function ba(a,b,c,d,e,f,h,i){var j=[],k=[];if(a=aa(a,b,j,k),"retain"===a.subtree)return b;if(!a.tag&&k.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");a.attrs=a.attrs||{},b.attrs=b.attrs||{};var l=Object.keys(a.attrs),m=l.length>("key"in a.attrs?1:0);if(H(a,b,l),g(a.tag)){var n=0===b.nodes.length;h=I(a,h);var o;if(n){o=T(a,h);var p=U(a,o,h,m);y(d,o,e);var q=V(a,o,b,c,h,i);b=W(a,p,q,o,h,j,k)}else o=M(b,a,c,m,h,j,i,k);return n||f!==!0||null==o||y(d,o,e),L(i,a,o,n,b),b}}function ca(a,b,c,d,g,i,j,k,l,m,n){return g=v(g),"retain"===g.subtree?i:(i=S(g,i,k,d,c),h(g)?R(g,i,a,k,b,j,l,m,n):null!=g&&f(g)?ba(g,i,l,a,k,j,m,n):e(g)?i:P(i,g,k,a,j,l,b))}function da(a,b){return a.action-b.action||a.index-b.index}function ea(a,b,d){for(var e in b)c.call(b,e)&&(null!=d&&d[e]===b[e]||(a.style[e]=b[e]));for(e in d)c.call(d,e)&&(c.call(b,e)||(a.style[e]=""))}function ga(a,b,c,d,g,h){if("config"===b||"key"===b)return!0;if(e(c)&&"on"===b.slice(0,2))a[b]=pa(c,a);else if("style"===b&&null!=c&&f(c))ea(a,c,d);else if(null!=h)"href"===b?a.setAttributeNS("http://www.w3.org/1999/xlink","href",c):a.setAttribute("className"===b?"class":b,c);else if(b in a&&!fa[b])try{"input"===g&&a[b]===c||(a[b]=c)}catch(d){a.setAttribute(b,c)}else a.setAttribute(b,c)}function ha(a,b,c,d,e,f,g){if(b in e&&d===c&&k.activeElement!==a)"value"===b&&"input"===f&&a.value!==c&&(a.value=c);else{e[b]=c;try{return ga(a,b,c,d,f,g)}catch(a){if(a.message.indexOf("Invalid argument")<0)throw a}}}function ia(a,b,d,e,f){for(var g in d)!c.call(d,g)||!ha(a,g,d[g],e[g],e,b,f);return e}function ja(a,b){for(var c=a.length-1;c>-1;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(a){}b=[].concat(b),b[c]&&ka(b[c])}a.length&&(a.length=0)}function ka(a){a.configContext&&e(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null),a.controllers&&t(a.controllers,function(a){e(a.onunload)&&a.onunload({preventDefault:i})}),a.children&&(h(a.children)?t(a.children,ka):a.children.tag&&ka(a.children))}function la(a,b){try{a.appendChild(k.createRange().createContextualFragment(b))}catch(c){a.insertAdjacentHTML("beforeend",b),ma(a)}}function ma(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(na(a),a);else{var b=a.childNodes;if(b&&b.length)for(var c=0;c<b.length;c++)ma(b[c])}return a}function na(a){for(var b=document.createElement("script"),c=a.attributes,d=0;d<c.length;d++)b.setAttribute(c[d].name,c[d].value);return b.text=a.innerHTML,b}function oa(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=k.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else la(a,c);for(var g=[];a.childNodes[b]!==d;)g.push(a.childNodes[b]),b++;return g}function pa(a,b){return function(c){c=c||event,s.redraw.strategy("diff"),s.startComputation();try{return a.call(b,c)}finally{Ka()}}}function ua(a){var b=sa.indexOf(a);return b<0?sa.push(a)-1:b}function va(a){function b(){return arguments.length&&(a=arguments[0]),a}return b.toJSON=function(){return a},b}function Fa(a,b){function c(){return(a.controller||i).apply(this,b)||this}function d(c){for(var d=[c].concat(b),e=1;e<arguments.length;e++)d.push(arguments[e]);return a.view.apply(a,d)}a.controller&&(c.prototype=a.controller.prototype),d.$original=a.view;var e={controller:c,view:d};return b[0]&&null!=b[0].key&&(e.attrs={key:b[0].key}),e}function Ga(a,b,c,d){if(!d){s.redraw.strategy("all"),s.startComputation(),wa[c]=b;var e;e=Da=a?a:a={controller:i};var f=new(a.controller||i);return e===Da&&(ya[c]=f,xa[c]=a),Ka(),null===a&&Ha(b,c),ya[c]}null==a&&Ha(b,c)}function Ha(a,b){wa.splice(b,1),ya.splice(b,1),xa.splice(b,1),Wa(a),sa.splice(ua(a),1)}function Ja(){Ba&&(Ba(),Ba=null),t(wa,function(a,b){var c=xa[b];if(ya[b]){var d=[ya[b]];s.render(a,c.view?c.view(ya[b],d):"")}}),Ca&&(Ca(),Ca=null),za=null,Aa=new Date,s.redraw.strategy("diff")}function Ka(){"none"===s.redraw.strategy()?(J--,s.redraw.strategy("diff")):s.endComputation()}function Qa(a){return a.slice(La[s.route.mode].length)}function Ra(a,b,d){Oa={};var e=d.indexOf("?");e!==-1&&(Oa=Va(d.substr(e+1,d.length)),d=d.substr(0,e));var f=Object.keys(b),g=f.indexOf(d);if(g!==-1)return s.mount(a,b[f[g]]),!0;for(var h in b)if(c.call(b,h)){if(h===d)return s.mount(a,b[h]),!0;var i=new RegExp("^"+h.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(i.test(d))return d.replace(i,function(){var c=h.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);t(c,function(a,b){Oa[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])}),s.mount(a,b[h])}),!0}}function Sa(a){if(a=a||event,!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;var c,b=a.currentTarget||a.srcElement;for(c="pathname"===s.route.mode&&b.search?Va(b.search.slice(1)):{};b&&!/a/i.test(b.nodeName);)b=b.parentNode;J=0,s.route(b[s.route.mode].slice(La[s.route.mode].length),c)}}function Ta(){"hash"!==s.route.mode&&l.hash?l.hash=l.hash:a.scrollTo(0,0)}function Ua(a,d){var e={},g=[];for(var i in a)if(c.call(a,i)){var j=d?d+"["+i+"]":i,k=a[i];if(null===k)g.push(encodeURIComponent(j));else if(f(k))g.push(Ua(k,j));else if(h(k)){var l=[];e[j]=e[j]||{},t(k,function(a){e[j][a]||(e[j][a]=!0,l.push(encodeURIComponent(j)+"="+encodeURIComponent(a)))}),g.push(l.join("&"))}else k!==b&&g.push(encodeURIComponent(j)+"="+encodeURIComponent(k))}return g.join("&")}function Va(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));var b=a.split("&"),c={};return t(b,function(a){var b=a.split("="),d=decodeURIComponent(b[0]),e=2===b.length?decodeURIComponent(b[1]):null;null!=c[d]?(h(c[d])||(c[d]=[c[d]]),c[d].push(e)):c[d]=e}),c}function Wa(a){var c=ua(a);ja(a.childNodes,ta[c]),ta[c]=b}function Xa(a,b){var c=s.prop(b);return a.then(c),c.then=function(c,d){return Xa(a.then(c,d),b)},c.catch=c.then.bind(null,null),c}function ab(a,b){function i(a){d=a||_a,h.map(function(a){d===$a?a.resolve(g):a.reject(g)})}function j(a,b,c,d){if((null!=g&&f(g)||e(g))&&e(a))try{var h=0;a.call(g,function(a){h++||(g=a,b())},function(a){h++||(g=a,c())})}catch(a){s.deferred.onerror(a),g=a,c()}else d()}function k(){var f;try{f=g&&g.then}catch(a){return s.deferred.onerror(a),g=a,d=Za,k()}d===Za&&s.deferred.onerror(g),j(f,function(){d=Ya,k()},function(){d=Za,k()},function(){try{d===Ya&&e(a)?g=a(g):d===Za&&e(b)&&(g=b(g),d=Ya)}catch(a){return s.deferred.onerror(a),g=a,i()}g===c?(g=TypeError(),i()):j(f,function(){i($a)},i,function(){i(d===Ya&&$a)})})}var c=this,d=0,g=0,h=[];c.promise={},c.resolve=function(a){return d||(g=a,d=Ya,k()),c},c.reject=function(a){return d||(g=a,d=Za,k()),c},c.promise.then=function(a,b){var c=new ab(a,b);return d===$a?c.resolve(g):d===_a?c.reject(g):h.push(c),c.promise}}function bb(a){return a}function cb(c){var d=c.callbackName||"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),e=k.createElement("script");a[d]=function(f){e.parentNode.removeChild(e),c.onload({type:"load",target:{responseText:f}}),a[d]=b},e.onerror=function(){return e.parentNode.removeChild(e),c.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),a[d]=b,!1},e.onload=function(){return!1},e.src=c.url+(c.url.indexOf("?")>0?"&":"?")+(c.callbackKey?c.callbackKey:"callback")+"="+d+"&"+Ua(c.data||{}),k.body.appendChild(e)}function db(b){var c=new a.XMLHttpRequest;if(c.open(b.method,b.url,!0,b.user,b.password),c.onreadystatechange=function(){4===c.readyState&&(c.status>=200&&c.status<300?b.onload({type:"load",target:c}):b.onerror({type:"error",target:c}))},b.serialize===JSON.stringify&&b.data&&"GET"!==b.method&&c.setRequestHeader("Content-Type","application/json; charset=utf-8"),b.deserialize===JSON.parse&&c.setRequestHeader("Accept","application/json, text/*"),e(b.config)){var d=b.config(c,b);null!=d&&(c=d)}var f="GET"!==b.method&&b.data?b.data:"";if(f&&!g(f)&&f.constructor!==a.FormData)throw new Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return c.send(f),c}function eb(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?cb(a):db(a)}function fb(a,b,c){if("GET"===a.method&&"jsonp"!==a.dataType){var d=a.url.indexOf("?")<0?"?":"&",e=Ua(b);a.url+=e?d+e:""}else a.data=c(b)}function gb(a,b){return b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1),d=b[c]||a;return delete b[c],d})),a}s.version=function(){return"v0.2.5"};var k,l,m,n,c={}.hasOwnProperty,d={}.toString,h=Array.isArray||function(a){return"[object Array]"===d.call(a)},j={AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1};s.deps=function(b){return o(a=b||window),a},s.deps(a);var z=1,A=2,B=3,J=0;s.startComputation=function(){J++},s.endComputation=function(){J>1?J--:(J=0,s.redraw())};var qa,Y=[],$=!1,fa={list:1,style:1,form:1,type:1,width:1,height:1},ra={appendChild:function(a){qa===b&&(qa=k.createElement("html")),k.documentElement&&k.documentElement!==a?k.replaceChild(a,k.documentElement):k.appendChild(a),this.childNodes=k.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},sa=[],ta={};s.render=function(a,c,d){if(!a)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var h,e=[],f=ua(a),g=a===k;h=g||a===k.documentElement?ra:a,g&&"html"!==c.tag&&(c={tag:"html",attrs:{},children:c}),ta[f]===b&&ja(h.childNodes),d===!0&&Wa(a),ta[f]=ca(h,null,b,b,c,ta[f],!1,0,null,b,e),t(e,function(a){a()})},s.trust=function(a){return a=new String(a),a.$trusted=!0,a},s.prop=function(a){return(null!=a&&(f(a)||e(a))||"undefined"!=typeof Promise&&a instanceof Promise)&&e(a.then)?Xa(a):va(a)};var Da,wa=[],xa=[],ya=[],za=null,Aa=0,Ba=null,Ca=null,Ea=16;s.component=function(a){for(var b=new Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return Fa(a,b)},s.mount=s.module=function(a,b){if(!a)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var c=wa.indexOf(a);c<0&&(c=wa.length);var d=!1,f={preventDefault:function(){d=!0,Ba=Ca=null}};return t(Y,function(a){a.handler.call(a.controller,f),a.controller.onunload=null}),d?t(Y,function(a){a.controller.onunload=a.handler}):Y=[],ya[c]&&e(ya[c].onunload)&&ya[c].onunload(f),Ga(b,a,c,d)};var Ia=!1;s.redraw=function(b){if(!Ia){Ia=!0,b&&($=!0);try{za&&!b?(m===a.requestAnimationFrame||new Date-Aa>Ea)&&(za>0&&n(za),za=m(Ja,Ea)):(Ja(),za=m(function(){za=null},Ea))}finally{Ia=$=!1}}},s.redraw.strategy=s.prop(),s.withAttr=function(a,b,c){return function(d){d=d||window.event;var e=d.currentTarget||this,f=c||this,g=a in e?e[a]:e.getAttribute(a);b.call(f,g)}};var Oa,Pa,La={pathname:"",hash:"#",search:"?"},Ma=i,Na=!1;s.route=function(b,d,e,f){if(0===arguments.length)return Pa;if(3===arguments.length&&g(d)){Ma=function(a){var c=Pa=Qa(a);if(!Ra(b,e,c)){if(Na)throw new Error("Ensure the default route matches one of the routes defined in m.route");Na=!0,s.route(d,!0),Na=!1}};var h="hash"===s.route.mode?"onhashchange":"onpopstate";return a[h]=function(){var a=l[s.route.mode];"pathname"===s.route.mode&&(a+=l.search),Pa!==Qa(a)&&Ma(a)},Ba=Ta,void a[h]()}if(b.addEventListener||b.attachEvent){var i="pathname"!==s.route.mode?l.pathname:"";return b.href=i+La[s.route.mode]+f.attrs.href,void(b.addEventListener?(b.removeEventListener("click",Sa),b.addEventListener("click",Sa)):(b.detachEvent("onclick",Sa),b.attachEvent("onclick",Sa)))}if(g(b)){var j=Pa;Pa=b;var o,m=d||{},n=Pa.indexOf("?");o=n>-1?Va(Pa.slice(n+1)):{};for(var p in m)c.call(m,p)&&(o[p]=m[p]);var r,q=Ua(o);r=n>-1?Pa.slice(0,n):Pa,q&&(Pa=r+(r.indexOf("?")===-1?"?":"&")+q);var t=(3===arguments.length?e:d)===!0||j===b;if(a.history.pushState){var u=t?"replaceState":"pushState";Ba=Ta,Ca=function(){try{a.history[u](null,k.title,La[s.route.mode]+Pa)}catch(a){l[s.route.mode]=Pa}},Ma(La[s.route.mode]+Pa)}else l[s.route.mode]=Pa,Ma(La[s.route.mode]+Pa)}},s.route.param=function(a){if(!Oa)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return a?Oa[a]:Oa},s.route.mode="search",s.route.buildQueryString=Ua,s.route.parseQueryString=Va,s.deferred=function(){var a=new ab;return a.promise=Xa(a.promise),a};var Ya=1,Za=2,$a=3,_a=4;return s.deferred.onerror=function(a){if("[object Error]"===d.call(a)&&!/ Error/.test(a.constructor.toString()))throw J=0,a},s.sync=function(a){function f(a,f){return function(g){return d[a]=g,f||(e="reject"),0===--c&&(b.promise(d),b[e](d)),g}}var b=s.deferred(),c=a.length,d=[],e="resolve";return a.length>0?t(a,function(a,b){a.then(f(b,!0),f(b,!1))}):b.resolve([]),b.promise},s.request=function(a){var b=a.config;a.config=function(a){if(a.setRequestHeader("Authorization","Basic ZHBpa3Q6VGhvcmF4IDg2"),b)return b(a)},a.background!==!0&&s.startComputation();var e,f,g,c=new ab,d=a.dataType&&"jsonp"===a.dataType.toLowerCase();return d?(e=a.serialize=f=a.deserialize=bb,g=function(a){return a.responseText}):(e=a.serialize=a.serialize||JSON.stringify,f=a.deserialize=a.deserialize||JSON.parse,g=a.extract||function(a){return a.responseText.length||f!==JSON.parse?a.responseText:null}),a.method=(a.method||"GET").toUpperCase(),a.url=gb(a.url,a.data),fb(a,a.data,e),a.onload=a.onerror=function(b){try{b=b||event;var d=f(g(b.target,a));"load"===b.type?(a.unwrapSuccess&&(d=a.unwrapSuccess(d,b.target)),h(d)&&a.type?t(d,function(b,c){d[c]=new a.type(b)}):a.type&&(d=new a.type(d)),c.resolve(d)):(a.unwrapError&&(d=a.unwrapError(d,b.target)),c.reject(d))}catch(a){c.reject(a),s.deferred.onerror(a)}finally{a.background!==!0&&s.endComputation()}},eb(a),c.promise=Xa(c.promise,a.initialValue),c.promise},s});